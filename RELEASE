Instructions for the httpd-apreq Release Manager (RM)

Note that although binding votes for the release must come from httpd PMC
members, the RM him- (or her-)self need only be an apreq committer, not a
PMC member (but cannot vote in this case).



1. In /trunk (or in /branches/1.x or wherever the active development happens)
   edit ./Changes:

   =item 1.35 - <Today's Date>

   libapreq-1.35 released.
   
   Also, add a release entry to ./STATUS
   
   1.35       : Released <Today's Date>

2. Tag the tree, s/./_/g in the version number.

     % svn copy . https://svn.apache.org/repos/asf/httpd/apreq/tags/v1_35

3. Prep the package for CPAN by running:

     % sh BUILD.sh
     % perl Makefile.PL
     % make dist

   This will generate a libapreq-1.xx.tar.gz candidate in the 
   current directory.

4. Test the generated file's './configure ...' build and
   'perl Makefile.PL ...' build. Make sure all perl tests pass.

5. Sign the package via gpg:

     % gpg --detach-sign --armor libapreq-1.35.tar.gz

   or pgp:

    unix50i1b: % pgps -b --armor libapreq-1.35.tar.gz
    other:     % pgp -sba libapreq-1.35.tar.gz

   Check that your public key is among those listed in the
   /www/www.apache.org/dist/httpd/KEYS file.
   
   Create an md5 digest of the file
     
     % md5sum libapreq-1.35.tar.gz > libapreq-1.35.tar.gz.md5

6. Upload the release candidate to people.apache.org/~username/public_html

     % scp libapreq-1.35.tar.gz* username@people.apache.org:~/public_html
     
   Ask another developer to confirm the uploaded signature is ok 

    ---------------------------------------------------
    Subject: please verify sig of libapreq-1.35.tar.gz
    [Name], could you please verify the sig and md5:

    http://people.apache.org/~username/libapreq-1.35.tar.gz
    http://people.apache.org/~username/libapreq-1.35.tar.gz.asc
    http://people.apache.org/~username/libapreq-1.35.tar.gz.md5

    via gpg:

    % gpg --verify libapreq-1.35.tar.gz.asc

    or pgp:

    unix50i1b: % pgpv libapreq-1.35.tar.gz.asc
    other:     % pgp libapreq-1.35.tar.gz.asc
    
    The md5 can be verified by running
    
     % md5sum libapreq-1.35.tar.gz
     
    and comparing the output with the contents of libapreq-1.35.tar.gz.md5
    
    Thanks!
    ---------------------------------------------------
    
7. Post a candidate announcement to apreq-dev@.  
   Also, it is strongly recommended that the RM crosspost the 
   candidate announcement to the modperl@ list, to solicit feedback
   from a much larger audience.

8. Give the mailing list participants 48-72 hours to vote on the release.
   Tally the results after 72 hours of the call.  If there is a
   "majority consensus" (three +1 and more +1s than -1s) among the
   httpd PMC members, the RM may proceed with the release. Otherwise
   the RM must abandon this release and start fresh.  

   If any -1s are received, the release is rejected.  Edit the ./STATUS file
   and modify the line
   
    1.35       : Released <Date>
   
   to read
   
    1.35       : Not released
   
   Follow the instructions in step 12a, c and d (NOT b) to increment the
   version and commit your changes.  Then start a release with the new version
   number by starting again from step 1.

9. If 3 +1 votes are received by members of the httpd PMC, the release is a go.
   Copy the package and signature to the www.apache.org website 
   for distribution:

     people% mv public_html/libapreq-1.35.tar.gz* \
             /www/www.apache.org/dist/httpd/libapreq/

   Upload the package to CPAN. Doublecheck that the md5 checksum
   received from PAUSE is correct.
   
   Wait 24 hours to allow ASF and CPAN mirrors to propogate the release.
   
10. Update the httpd-areq homepage to list the new release in
    the News section. For instructions on updating the httpd website, 
    see httpd-apreq-2/build/WEBSITE.

11. Post a final announcement to the modperl@ and apreq-dev@ lists:

    Subject: [ANNOUNCEMENT] libapreq-1.35 (a.k.a. Apache::Request-1.35) Released
    ---------------------------------------------------
    The Apache Software Foundation and the Apache HTTP Server Project are
    pleased to announce the release of version 1.35 of the Apache HTTP
    Request Library ("libapreq").  This version includes the following fixes
    and enhancements:
    
    <LIST OF CHANGES SINCE LAST VERSION>
    
    We consider this release to be the best version of libapreq-1.x
    available, and encourage users of all prior versions to upgrade.
    
    libapreq-1.35 can be downloaded from the Apache Software Foundation at
    the following address:
    http://httpd.apache.org/apreq/download.html
    
    libapreq-1.35 is also available at a CPAN mirror near you, and has
    entered CPAN as
    
    <COPY CPAN INFORMATION>
      file: xxx
      size: xxx
       md5: xxx
    ---------------------------------------------------

12. Prepare for the next cycle

  a. increment version in Request/Request.pm

  b. edit ./Changes:
     - start a new item with incremented version + '-dev'

  =item 1.36-dev

  c. update this file versions to make it easy to copy-n-paste things
    on the next release:

   perl -pi -e 's/\.36/\.37/g' RELEASE
   perl -pi -e 's/_35/_36/g'   RELEASE
   perl -pi -e 's/\.35/\.36/g' RELEASE

    now reload this file and bump up the last number of the first
    two commands.

  d. commit the changed files

     % svn ci Changes Request/Request.pm STATUS RELEASE
